<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test des images de dés de blocage</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .dice-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }
      .dice-item {
        text-align: center;
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 8px;
        background: #f9f9f9;
      }
      .dice-item img {
        width: 80px;
        height: 80px;
        object-fit: contain;
        border: 1px solid #ccc;
        border-radius: 4px;
        background: white;
      }
      .dice-item h3 {
        margin: 10px 0 5px 0;
        color: #333;
      }
      .dice-item p {
        margin: 0;
        font-size: 12px;
        color: #666;
      }
      .status {
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
      }
      .success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Test des images de dés de blocage Blood Bowl</h1>

      <div id="status" class="status">Chargement des images...</div>

      <div class="dice-grid" id="diceGrid">
        <!-- Les images seront chargées dynamiquement -->
      </div>
    </div>

    <script>
      const diceFaces = [
        {
          name: "Player Down!",
          filename: "player_down.png",
          description: "L'attaquant est mis au sol",
        },
        {
          name: "Both Down",
          filename: "both_down.png",
          description: "Les deux joueurs sont mis au sol",
        },
        {
          name: "Push Back",
          filename: "push_back.png",
          description: "La cible est repoussée d'1 case",
        },
        {
          name: "Stumble",
          filename: "stumble.png",
          description:
            "Si la cible utilise Dodge, cela devient Push ; sinon, c'est POW!",
        },
        {
          name: "POW!",
          filename: "pow.png",
          description: "La cible est repoussée puis mise au sol",
        },
      ];

      const statusDiv = document.getElementById("status");
      const diceGrid = document.getElementById("diceGrid");
      let loadedImages = 0;
      let totalImages = diceFaces.length;

      function updateStatus(message, isError = false) {
        statusDiv.textContent = message;
        statusDiv.className = `status ${isError ? "error" : "success"}`;
      }

      function createDiceItem(diceFace) {
        const item = document.createElement("div");
        item.className = "dice-item";

        const img = document.createElement("img");
        img.src = `/images/blocking_dice/${diceFace.filename}`;
        img.alt = diceFace.name;
        img.title = diceFace.description;

        img.onload = () => {
          loadedImages++;
          if (loadedImages === totalImages) {
            updateStatus(
              `✅ Toutes les images sont chargées avec succès ! (${loadedImages}/${totalImages})`,
            );
          } else {
            updateStatus(
              `Chargement... ${loadedImages}/${totalImages} images chargées`,
            );
          }
        };

        img.onerror = () => {
          updateStatus(
            `❌ Erreur lors du chargement de l'image: ${diceFace.filename}`,
            true,
          );
        };

        const title = document.createElement("h3");
        title.textContent = diceFace.name;

        const description = document.createElement("p");
        description.textContent = diceFace.description;

        item.appendChild(img);
        item.appendChild(title);
        item.appendChild(description);

        return item;
      }

      // Créer les éléments de dés
      diceFaces.forEach((diceFace) => {
        diceGrid.appendChild(createDiceItem(diceFace));
      });

      // Vérifier si on est sur le bon port
      if (window.location.port !== "3000") {
        updateStatus(
          "⚠️ Assurez-vous que l'application Next.js est démarrée sur le port 3000",
          true,
        );
      }
    </script>
  </body>
</html>
