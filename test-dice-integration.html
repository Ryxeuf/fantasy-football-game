<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test d'int√©gration des d√©s de blocage - Blood Bowl</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #2c3e50;
        text-align: center;
        margin-bottom: 30px;
      }
      .dice-section {
        margin-bottom: 30px;
      }
      .dice-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }
      .dice-item {
        text-align: center;
        padding: 15px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        background: #fafafa;
      }
      .dice-item h3 {
        margin: 0 0 10px 0;
        color: #34495e;
      }
      .dice-image {
        width: 64px;
        height: 64px;
        object-fit: contain;
        margin: 10px 0;
        border: 1px solid #ddd;
        border-radius: 4px;
        background: white;
      }
      .dice-description {
        font-size: 14px;
        color: #666;
        margin-top: 10px;
      }
      .test-section {
        margin-top: 30px;
        padding: 20px;
        background: #e8f4f8;
        border-radius: 8px;
      }
      .test-button {
        background: #3498db;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
      }
      .test-button:hover {
        background: #2980b9;
      }
      .result {
        margin-top: 15px;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 4px;
        border-left: 4px solid #3498db;
      }
      .error {
        border-left-color: #e74c3c;
        background: #fdf2f2;
      }
      .success {
        border-left-color: #27ae60;
        background: #f0f9f0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üé≤ Test d'int√©gration des d√©s de blocage - Blood Bowl</h1>

      <div class="dice-section">
        <h2>Faces des d√©s de blocage disponibles</h2>
        <p>
          V√©rification que toutes les images des d√©s de blocage sont
          correctement charg√©es et mapp√©es selon les r√®gles de Blood Bowl.
        </p>
        <p>
          <strong>Distribution :</strong> Les d√©s de blocage ont 6 faces avec 5
          ic√¥nes uniques. "Push Back" appara√Æt sur 2 faces (probabilit√© 2/6),
          les autres ic√¥nes sur 1 face chacune (probabilit√© 1/6).
        </p>

        <div class="dice-grid">
          <div class="dice-item">
            <h3>Player Down!</h3>
            <img
              src="/images/blocking_dice/player_down.png"
              alt="Player Down!"
              class="dice-image"
              id="player-down-img"
            />
            <div class="dice-description">
              L'attaquant est mis au sol (probabilit√© 1/6)
            </div>
          </div>

          <div class="dice-item">
            <h3>Both Down</h3>
            <img
              src="/images/blocking_dice/both_down.png"
              alt="Both Down"
              class="dice-image"
              id="both-down-img"
            />
            <div class="dice-description">
              Les deux joueurs sont mis au sol (probabilit√© 1/6)
            </div>
          </div>

          <div class="dice-item">
            <h3>Push Back (2 faces)</h3>
            <img
              src="/images/blocking_dice/push_back.png"
              alt="Push Back"
              class="dice-image"
              id="push-back-img"
            />
            <div class="dice-description">
              La cible est repouss√©e d'1 case (probabilit√© 2/6)
            </div>
          </div>

          <div class="dice-item">
            <h3>Stumble</h3>
            <img
              src="/images/blocking_dice/stumble.png"
              alt="Stumble"
              class="dice-image"
              id="stumble-img"
            />
            <div class="dice-description">
              Si la cible utilise Dodge, cela devient Push ; sinon, c'est POW!
              (probabilit√© 1/6)
            </div>
          </div>

          <div class="dice-item">
            <h3>POW!</h3>
            <img
              src="/images/blocking_dice/pow.png"
              alt="POW!"
              class="dice-image"
              id="pow-img"
            />
            <div class="dice-description">
              La cible est repouss√©e puis mise au sol (probabilit√© 1/6)
            </div>
          </div>
        </div>
      </div>

      <div class="test-section">
        <h2>Tests d'int√©gration</h2>
        <p>
          V√©rification que toutes les images se chargent correctement et que le
          mapping correspond aux r√®gles du jeu.
        </p>

        <button class="test-button" onclick="testImageLoading()">
          Tester le chargement des images
        </button>
        <button class="test-button" onclick="testDiceMapping()">
          Tester le mapping des d√©s
        </button>
        <button class="test-button" onclick="testAllImages()">
          Tester toutes les images
        </button>

        <div id="test-results"></div>
      </div>
    </div>

    <script>
      const diceMapping = {
        PLAYER_DOWN: {
          image: "/images/blocking_dice/player_down.png",
          description: "Player Down! - L'attaquant est mis au sol",
        },
        BOTH_DOWN: {
          image: "/images/blocking_dice/both_down.png",
          description: "Both Down - Les deux joueurs sont mis au sol",
        },
        PUSH_BACK: {
          image: "/images/blocking_dice/push_back.png",
          description: "Push Back - La cible est repouss√©e d'1 case",
        },
        STUMBLE: {
          image: "/images/blocking_dice/stumble.png",
          description:
            "Stumble - Si la cible utilise Dodge, cela devient Push ; sinon, c'est POW!",
        },
        POW: {
          image: "/images/blocking_dice/pow.png",
          description: "POW! - La cible est repouss√©e puis mise au sol",
        },
      };

      function logResult(message, isError = false, isSuccess = false) {
        const resultsDiv = document.getElementById("test-results");
        const resultDiv = document.createElement("div");
        resultDiv.className = `result ${isError ? "error" : isSuccess ? "success" : ""}`;
        resultDiv.textContent = message;
        resultsDiv.appendChild(resultDiv);
      }

      function testImageLoading() {
        logResult("üîÑ Test du chargement des images...");
        let loadedCount = 0;
        let totalCount = 0;

        Object.values(diceMapping).forEach((dice) => {
          totalCount++;
          const img = new Image();
          img.onload = () => {
            loadedCount++;
            if (loadedCount === totalCount) {
              logResult(
                `‚úÖ Toutes les images (${loadedCount}) se chargent correctement!`,
                false,
                true,
              );
            }
          };
          img.onerror = () => {
            logResult(`‚ùå Erreur de chargement: ${dice.image}`, true);
          };
          img.src = dice.image;
        });
      }

      function testDiceMapping() {
        logResult("üîÑ Test du mapping des d√©s...");

        const expectedFaces = [
          "PLAYER_DOWN",
          "BOTH_DOWN",
          "PUSH_BACK",
          "STUMBLE",
          "POW",
        ];
        let mappingCorrect = true;

        expectedFaces.forEach((face) => {
          if (!diceMapping[face]) {
            logResult(`‚ùå Face manquante: ${face}`, true);
            mappingCorrect = false;
          } else {
            logResult(`‚úÖ ${face}: ${diceMapping[face].description}`);
          }
        });

        if (mappingCorrect) {
          logResult(
            "‚úÖ Toutes les faces sont correctement mapp√©es!",
            false,
            true,
          );
        }
      }

      function testAllImages() {
        logResult("üîÑ Test complet des images et du mapping...");

        // Test du chargement
        testImageLoading();

        // Test du mapping
        setTimeout(() => {
          testDiceMapping();

          // Test de conformit√© avec les r√®gles
          logResult(
            "üîÑ V√©rification de la conformit√© avec les r√®gles de Blood Bowl...",
          );

          const rulesCompliance = [
            "‚úÖ 5 faces de d√©s (Player Down!, Both Down, Push Back, Stumble, POW!)",
            "‚úÖ Images correspondant aux faces officielles",
            "‚úÖ Descriptions en fran√ßais conformes aux r√®gles",
            "‚úÖ Mapping correct des r√©sultats de blocage",
          ];

          rulesCompliance.forEach((rule) => {
            logResult(rule, false, true);
          });

          logResult(
            "üéâ Tous les tests sont pass√©s! Les d√©s de blocage sont correctement impl√©ment√©s.",
            false,
            true,
          );
        }, 1000);
      }

      // Test automatique au chargement de la page
      window.onload = function () {
        logResult("üöÄ Page charg√©e - Tests automatiques en cours...");
        testAllImages();
      };
    </script>
  </body>
</html>
